{
	// Use IntelliSense to learn about possible attributes.
	// Hover to view descriptions of existing attributes.
	// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
	"version": "0.2.0",
	"configurations": [
		/*{

			"preLaunchTask": "build",
			"type": "cortex-debug",
			"request": "launch",
			"name": "OpenOCD debug",
			"demangle" : true,
			"showDevDebugOutput": "none",
			"servertype": "openocd",
			//this is right place to define adapter speeds
			 "postStartSessionCommands": [
			 	"monitor adapter speed 500"
			 ],
			 "postRestartSessionCommands": [
			 	"monitor adapter speed 500"
			 ],
			"interface": "swd",
			"cwd": "${workspaceRoot}",
			"executable": "${workspaceRoot}/build/FASTIC.elf",
			"svdFile": "${workspaceRoot}/STM32H753.svd",
			"configFiles": [
				"${workspaceRoot}/openocd.cfg",
			],
			"breakAfterReset": false
			// configure SWO
			// "swoConfig": {
			// 	"enabled": true,
			// 	"source": "probe",
			// 	"swoFrequency":   1000000,
			// 	"cpuFrequency": 72000000,
			// 	"decoders": [
			// 		{
			// 			"port": 0,
			// 			"type": "console",
			// 			"showOnStartup": true,
			// 			"label": "SWO output",
			// 			"encoding": "ascii"
			// 		},
			// 	],
			// },
		},

		{
			"type": "cortex-debug",
			// there is also attach mode, that that has several issues
			"request": "attach",
			"name": "OpenOCD SEC ATTACH",
			"demangle" : true,
			"showDevDebugOutput": "none",
			"servertype": "openocd",
			"configFiles": [
				"${workspaceRoot}/openocd.cfg",
			],
			//this is right place to define adapter speeds
			// "postStartSessionCommands": [
			// 	"monitor adapter speed 500"
			// ],
			// "postRestartSessionCommands": [
			// 	"monitor adapter speed 500"
			// ],
			"cwd": "${workspaceRoot}",
			"executable": "${workspaceRoot}/build/FASTIC.elf",
			"svdFile": "${workspaceRoot}/STM32H753.svd"
		},*/

		{
            "name": "BMP attach",
            "cwd": "${workspaceRoot}",
            "executable": "${workspaceRoot}/build/FASTIC.elf",
            "request": "attach",    // "launch" also works perhaps
            "type": "cortex-debug",
            "servertype": "bmp",
            "interface": "swd",
            "device": "STM32H753",
            "BMPGDBSerialPort": "COM8",  // Use whatever serial port makes sense for your OS and BMP setup
			"svdFile": "${workspaceRoot}/STM32H753.svd"
        },
        {
            "name": "BMP Debug",
            "cwd": "${workspaceRoot}",
            "executable": "${workspaceRoot}/build/FASTIC.elf",
            "request": "launch",    
            "preLaunchTask": "build",
            "type": "cortex-debug",
            "servertype": "bmp",
            "interface": "swd",
            "device": "STM32H753",
            "BMPGDBSerialPort": "COM8",  // Use whatever serial port makes sense for your OS and BMP setup
            "runToEntryPoint": "main",
			"svdFile": "${workspaceRoot}/STM32H753.svd"

        }

	]
}